mha介绍

MHA在宕机时提供自动的主从切换，通常在10-30s内完成。MHA能够防止复制的一致性问题以及为了购买服务器造成的费用增加问题。
所有的这些，不对对性能造成影响，同时不需要改变现有部署，非常简单易用。

MHA同时也提供在线的主从切换，安全的迁移当前正在运行的一个master到另一个新的master，通常在0.5-2s的宕机时间内（仅仅阻塞写操作）

MHA的主从切换流程：
选一个备用的master
确定各个从之前的事件差异
向这个master发送它没有收到的relay log
同步其他slave
修改主从同步


主从切换的其他解决方案：
事务组提交
半同步复制


结合半同步复制，可以保证数据0丢失


特点：
快速切换
master崩溃不会导致数据不一致
不需要更改mysql配置
无需增加服务器
不会带来性能影响，监控动作只是发送ping包，不发送大的query查询
适用于任何存储引擎